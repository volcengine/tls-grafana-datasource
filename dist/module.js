define(["@grafana/data","@grafana/runtime","react","@grafana/ui"],((e,t,n,r)=>(()=>{"use strict";var l={781:t=>{t.exports=e},531:e=>{e.exports=t},7:e=>{e.exports=r},959:e=>{e.exports=n}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={exports:{}};return l[e](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{o.r(c),o.d(c,{plugin:()=>x});var e=o(781),t=o(531);const n={tls_query:"*"};class r extends t.DataSourceWithBackend{getDefaultQuery(e){return n}constructor(e){super(e)}}var l,a,i,s,u=o(959),p=o.n(u),d=o(7);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const g=[{color:"#ff006e",label:"空 empty",value:"表格或日志 table or log"},{color:"#80ed99",label:"【时间列 Time colomn】",value:"时序数据 Timeseries"},{color:"#0077b6",label:"stat",value:"单值图格式 gauge/stat graph"},{color:"#0096c7",label:"pie",value:"饼图格式 pie graph"},{color:"#00b4d8",label:"bar",value:"柱状图格式 bar graph"}],y=[{color:"#ffca3a",label:"【无需填写】 Log、表格全列展示",value:"[No need to fill in] Log、table show all columns"},{color:"#8ac926",label:"【col1,col2,col3】 展示指定的数值列",value:"[col1,col2,col3] Displaying specified columns"}],v=[{label:"TimeSeries / Custom",value:"custom",description:"时序数据 Timeseries 自定义【时间列 Time colomn】，或自定义x轴输入"},{label:"Table / Log",value:"table",description:"表格或日志 table or log"},{label:"Stat / Gauge",value:"stat",description:"单值图格式 gauge/stat graph"},{label:"Pie",value:"pie",description:"饼图格式 pie graph"},{label:"Bar",value:"bar",description:"柱状图格式 bar graph"}];var h;const O=null!==(h=null===(s=window)||void 0===s||null===(i=s.grafanaBootData)||void 0===i||null===(a=i.settings)||void 0===a||null===(l=a.buildInfo)||void 0===l?void 0:l.version)&&void 0!==h?h:"";function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}function w(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function P(e){const t=""===O||O.startsWith("8.0")||O.startsWith("8.1")||O.startsWith("8.2")||O.startsWith("8.3")||O.startsWith("7"),n="xcol"===e.type?g:y;return t?p().createElement("table",null,n.map(((e,t)=>p().createElement("tr",{key:e.color},p().createElement("td",{style:{width:"45px"}},`${t+1}.`),p().createElement("td",null,e.label),p().createElement("td",null,e.value))))):p().createElement(d.Card,null,p().createElement(d.Card.Heading,null,`${e.type} 简介 Introduction`),p().createElement(d.Card.Description,null,p().createElement(d.SeriesTable,{series:n})))}const x=new e.DataSourcePlugin(r).setConfigEditor((function(e){const{onOptionsChange:t,options:n}=e,{jsonData:r,secureJsonFields:l}=n,a=n.secureJsonData||{};return p().createElement("div",{className:"gf-form-group"},p().createElement(d.InlineField,{label:"Endpoint",labelWidth:16},p().createElement(d.Input,{onChange:e=>{const r=f(m({},n.jsonData),{endpoint:e.target.value});t(f(m({},n),{jsonData:r}))},value:r.endpoint||"",placeholder:"https://tls-cn-beijing.volces.com",width:65})),p().createElement(d.InlineField,{label:"Region",labelWidth:16},p().createElement(d.Input,{onChange:e=>{const r=f(m({},n.jsonData),{region:e.target.value});t(f(m({},n),{jsonData:r}))},value:r.region||"",placeholder:"cn-beijing",width:65})),p().createElement(d.InlineField,{label:"Topic",labelWidth:16},p().createElement(d.Input,{onChange:e=>{const r=f(m({},n.jsonData),{topic:e.target.value});t(f(m({},n),{jsonData:r}))},value:r.topic||"",placeholder:"",width:65})),p().createElement(d.InlineField,{label:"AccessKeyId",labelWidth:16},p().createElement(d.Input,{onChange:e=>{const r=f(m({},n.jsonData),{accessKeyId:e.target.value});t(f(m({},n),{jsonData:r}))},value:r.accessKeyId||"",placeholder:"",width:65})),p().createElement(d.InlineField,{label:"AccessKeySecret",labelWidth:16},p().createElement(d.SecretInput,{isConfigured:l&&l.accessKeySecret,value:a.accessKeySecret||"",placeholder:"",width:65,onReset:()=>{t(f(m({},n),{secureJsonFields:f(m({},n.secureJsonFields),{accessKeySecret:!1}),secureJsonData:f(m({},n.secureJsonData),{accessKeySecret:""})}))},onChange:e=>{t(f(m({},n),{secureJsonData:{accessKeySecret:e.target.value}}))}})))})).setQueryEditor((function({query:e,onChange:t,onRunQuery:n}){const{ycol:r,xcol:l,tls_query:a}=e;return p().createElement(p().Fragment,null,p().createElement("div",{className:"gf-form gf-form--grow flex-shrink-1 min-width-15"},p().createElement(d.InlineFormLabel,{width:6,className:"query-keyword"},"Query"),p().createElement("div",{style:{width:"100%"}},p().createElement(d.Input,{onChange:r=>{t(w(j({},e),{tls_query:r.target.value})),n()},value:a||""}))),p().createElement("div",{className:"gf-form-inline"},p().createElement(d.InlineField,{label:"ycol",labelWidth:12},p().createElement(d.Input,{onChange:r=>{t(w(j({},e),{ycol:r.target.value})),n()},value:r||"",width:40,prefix:p().createElement(d.Icon,{name:"text-fields"}),suffix:p().createElement(d.Tooltip,{content:p().createElement(P,{type:"ycol"}),interactive:!0,theme:"info-alt"},p().createElement(d.Icon,{name:"question-circle"}))})),p().createElement(d.InlineField,{label:"xcol",labelWidth:12},p().createElement("div",{style:{display:"flex"}},p().createElement(d.Select,{width:20,menuShouldPortal:!0,options:v,value:(o=null!=l?l:"time",v.find((e=>e.value===o))?o:"custom"),onChange:r=>{"custom"!==r.value?(t(w(j({},e),{xcol:r.value})),n()):t(w(j({},e),{xcol:"time"}))},prefix:p().createElement(d.Icon,{name:"palette"})}),p().createElement(d.Input,{onChange:n=>{t(w(j({},e),{xcol:n.target.value}))},value:l||"",width:40,prefix:p().createElement(d.Icon,{name:"x"}),suffix:p().createElement(d.Tooltip,{content:p().createElement(P,{type:"xcol"}),interactive:!0,theme:"info-alt"},p().createElement(d.Icon,{name:"question-circle"}))})))));var o}))})(),c})()));
//# sourceMappingURL=module.js.map